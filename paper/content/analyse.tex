\chapter{Analyse}\label{chapter:analysis}
In diesem Kapitel werden die Analyseschritte und die Vorüberlegungen beschrieben, die vor der Konzeption und Implementierung der Anwendung durchgeführt wurden. Hierzu gehen wir in Abschnitt \ref{sec:problem_ana} zunächst auf die Probleme und Einsatzszenarien ein und beschreiben dann in Abschnitt \ref{sec:user_ana} die Ergebnisse der Benutzeranalyse. Abschließend präsentieren wir in Abschnitt \ref{sec:context_ana} unsere Kontextanalyse.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\imiscomment{Analyse der Problemstellung, der Zielgruppen sowie des Anwendungskontextes}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Problemanalyse}\label{sec:problem_ana}
Bei der Entwicklung des MACK-Frameworks geht es vor allem um die Entwicklung eines zentralen Systems, das aus verschiedenen Reasonern besteht, die auf Basis von Sensordaten Zustände von Personen ermitteln können und diese an Aktuatoren weiterleiten. Dieses System soll durch verschiedene externe Komponenten wie Sensoren und Aktuatoren erweitert werden, um auf beliebige Kontexte adaptiert werden zu können. Hierbei entstehen komplexe Abhängigkeiten, da die ermittelten Werte der Sensoren vom Verhalten der Personen abhängen, welches wiederum zu einem gewissen Anteil von den Meldungen der Aktuatoren abhängen kann.

Um die Effizienz und Vollständigkeit der Reasoner zu verifizieren gibt es bislang nur die Möglichkeit, diese mit Hardware-Impementierungen der Sensoren und Aktuatoren zu verknüpfen und denkbare Szenarien durchzuführen. Dies eröffnet zum einen das Problem, dass zunächst die Hardware entwickelt werden muss, was mit hohem Zeit- und Kostenaufwand verbunden ist. Zum anderen muss das System von vielen Benutzern eingesetzt werden, um repräsentative Ergebnisse zu erhalten.

Darüber hinaus gibt es bisher unerforschte Einsatzgebiete für das MACK-Framework, für die es weder die Reasoner noch die notwendige Hardware gibt. Bevor die teure Hardware entwickelt oder eingekauft wird, soll getestet werden, ob das System für den angedachten Anwendungszweck geeignet ist.

Selbst mit, in ausreichendem Umfang vorhandener, Hardware ist es nur schwer möglich, die Wechselwirkung zwischen den Personen und dem Framework zu testen, da dies die Beobachtung der Benutzer in ihrem täglichen Handeln und eine entsprechende Verhaltensanalyse voraussetzt. Diese Analyse ist nur schwer zu realisieren und insbesondere dann sehr aufwändig, wenn die Auswirkungen minimaler Änderungen an Reasonern oder dem Framework an sich, verifiziert werden sollen.

Um eine Idee dafür zu bekommen, in welchen Einsatzgebiete das Framework eingesetzt werden könnte und welches demnach Gebiete sind, für die Simulationen realisierbar sein sollten, haben wir uns verschiedene Szenarien überlegt. Mit den nachfolgenden Szenarien haben wir im Verlauf der Planung und Implementierung verifizieren können, dass das Simulationsframework flexibel genug ist um auf verschiedene Einsatzgebiete adaptiert werden zu können.

Die Implementierung aller Szenarien im beschriebenen Umfang ist nicht Teil unseres Projektes. Wir beschränken uns hierbei auf eine grundlegende Implementierung des Büro-Szenarios in einer, ähnlich der im nachfolgenden beschriebenen, Form.

\subsection*{Szenario: Büro}

Das Büroszenario ist das Standardszenario des IMIS, für das bereits Teile einer Hardware-Implemen\-tierung und entsprechende Reasoner vorliegen.

Es gibt mehrere Büros, abgehend von einem Korridor. Jedes Büro hat einen Schreibtisch, der eine Dropzone\footnote{Bei der Dropzone handelt es sich um eine Station, in die verschiedene Benutzer Marken, bzw. ihre Schlüssel, legen können. Das Gerät erkennt dann, welche Marken vorhanden sind und führt so Rückschlüsse auf die im Raum befindlichen Personen durch.} und einen Cubus\footnote{Der Cubus ist ein Würfel, dessen Oberseite den vom Framework ermittelten Zustand des Besitzers angibt. Durch Drehen des Würfels kann eine explizite Änderung des Zustands erwirkt werden. Weitere Informationen befinden sich in Abschnitt 3.1 von \cite{doku-sensor-aktuator}.} beherbergt. Außerdem steht in jedem Büro ein Telefon und es gibt eine akustische Überwachung\footnote{Gemeint ist das in Abschnitt 3.5 von \cite{doku-sensor-aktuator} beschriebene \emph{Mike}.}, mit der festgestellt werden kann, ob der dort arbeitende Anwender gerade spricht. 

Es gibt an jeder Bürotür ein interaktives Türschild und eine Ampel, die Besuchern Informationen über die Unterbrechbarkeit des Bürobesitzers liefern.
Vom Flur abgehend gibt es Toiletten, eine Teeküche und einen Konferenzraum. Die Toiletten melden, wenn sie belegt sind, aus Gründen der Privatsphäre jedoch nicht, wer sie gerade benutzt. Personen haben die Möglichkeit, bevor sie aufstehen, zu sehen, ob die Toilette gerade besetzt ist. In der Teeküche gibt es einen Kaffeeautomaten, der gerne von Mitarbeitern zum Pausengespräch genutzt wird. Im Konferenzraum werden täglich die Tagesziele besprochen. Zu diesen Meetings müssen alle Mitarbeiter kommen.

Das Standardverhalten, wenn Personen keine spezifische Aktion vorhaben, ist, im Büro am Schreibtisch zu sitzen, sich Kaffee zu holen oder eine der Toiletten aufzusuchen.

Mögliche Zufallskomponente, die einen Anwender in seiner aktuellen Aktion unterbrechen könnten, sind zum Beispiel das Klingeln des Telefons oder andere Kommunikationsmittel. Wenn der Adressat im Radius des Kommunikationsmittels ist, beschäftigt er sich für eine zufällige Dauer mit der Kommunikation und unterbricht dafür seine Arbeit.

\subsection*{Szenario: Museum}
 
In einem Museum gibt es verschiedene Bereiche mit unterschiedlichen Themengebieten, zum Beispiel könnte es in einer Ausstellung über die menschlichen Sinne die Bereiche \glqq Sehen\grqq , \glqq Hören\grqq\ und \glqq Fühlen\grqq. Außerdem gibt es Toiletten und einen Souvenirladen.

Im Museum halten sich Besucher (20 – 100) und verschiedene Mitarbeiter (10 – 20) auf. Einige Mitarbeiter machen Führungen mit Besuchern durch bestimmte Bereiche, einige Mitarbeiter bewachen empfindliche oder wertvolle Ausstellungsstücke und können Besuchern Wege zu bestimmten Bereichen wie Toiletten und dem Ausgang weisen.

Am Ein- und Ausgang befindet sich ein Lageplan für das Museum, an verschiedenen Ausstellungsstücken gibt es Informationstafel und beim Eintritt in das Museum können die Besucher einen elektronischen Führer mitnehmen. Der elektronische Führer ist Sensor und Aktuator zugleich. Er ermöglicht dem Besucher, sich die Hinweise auf den Informationstafeln vorlesen zu lassen und merkt sich, welche Ausstellungsstücke und Bereiche des Museums den Besucher interessieren. Auf Grundlage dieser Daten macht er Vorschläge, welche anderen Bereiche und Ausstellungsstücke interessant für diesen Besucher sein könnten. Außerdem schlägt er Führungen durch das Museum vor, die ebenfalls auf die Interessen des Benutzers angepasst sind. Der elektronische Führer könnte zusätzlich beim Betreten des Souvenirladens anzeigen, welche Souvenirs dem Besucher gefallen könnten.

Es gibt noch weitere Sensoren innerhalb der Bereiche, die feststellen können, wie viele Personen sich dort aufhalten. Durch Aktuatoren an den, in diese Bereiche führenden, Türen könnte den Besuchern angezeigt werden, welche Bereiche gerade überfüllt oder wenig besucht sind.

\subsection*{Szenario: Krankenhaus}

In einem Krankenhaus auf einer Intensivstation arbeiten zehn Krankenschwestern und zwei Ärzte. Es gibt zehn Einzelzimmer und zehn Doppelzimmer. Insgesamt gibt es 30 Patienten. Die zehn Patienten in den Einzelzimmern sind in einem kritischen Zustand und deshalb an ein Health-Monitoring-System (HMS) angeschlossen, welches den Sauerstoffgehalt im Blut, den Blutdruck, den Puls und die Atemfrequenz erfasst. Außerdem stuft das System den Patienten anhand dieser Werte in Kategorien ein: \glqq sehr gut\grqq, \glqq gut\grqq, \glqq stabil\grqq, \glqq kritisch\grqq, \glqq lebensgefährlich\grqq\ und \glqq unbekannt\grqq.

Alle Mitarbeiter verfügen über einen Tablett PC, über den sie innerhalb der Station lokalisiert werden können. Darüber hinaus werden die Geräte zur Protokollierung der Visiten verwendet. Wenn ein Patient in den Zustand \glqq kritisch\grqq\ oder schlechter wechselt, werden beide Ärzte über das Tablett informiert. Sie erhalten die Zustandseinschätzung des HMS, die Analysewerte und die Information, welcher Patient in welchem Raum betroffen ist.

Die Station hat außerdem zwei Computerarbeitsplätze im Schwesternzimmer, sowie zwei, mit Computern ausgestattete, Behandlungszimmer, in denen sich gleichzeitig die Schreibtischarbeitsplätze der Ärzte befinden. Alle Computer sind mit einem \glqq Desktop Activity Analyzer\footnote{Der DAA überwachte die Aktivität und die Programmart, die sich im Vordergrund befindet. Siehe Abschnitt 3.4 von \cite{doku-sensor-aktuator}.}\grqq\ ausgestattet.

Die Simulation beginnt am 1.11.2011 um 4:30. Eine der beiden Nachtschwestern macht einen Kontrollgang. Danach begibt sie sich zurück ins Schwesternzimmer und arbeitet für zwei Stunden am PC. Um 5:00 Uhr wechselt das HMS in Raum 1 von \glqq stabil\grqq\ auf \glqq kritisch\grqq. Wenn das Panel im Schwesternzimmer dies anzeigt, soll eine Schwester sofort in das entsprechende Zimmer gehen und Gegenmaßnahmen vornehmen, so dass der Zustand im Anschluss mindestens \glqq stabil\grqq\ ist. Danach setzt die Schwester ihr vorherige Aktivität fort. 

Um 5:30 Uhr macht die andere Schwester einen Rundgang. Um 6:00 Uhr kommt der erste Arzt. Er holt sich zunächst einen Kaffee aus der Küche und geht danach in sein Zimmer  um dort für 30 Minuten am Computer die Vorkommnisse der letzten Nacht durchzugehen (lesen). Der zweite Arzt kommt um 6:15 Uhr, holt sich ebenfalls einen Kaffee und geht danach in sein Zimmer um an seinem Computer die Vorkommnisse der letzten Nacht zu analysieren. Um 6:45 Uhr kommen die ersten fünf Tagesschwestern. Um 7:00 Uhr treffen sich alle anwesenden Mitarbeiter zur Besprechung im Schwesternzimmer (1 Stunde). Danach gehen die Nachtschwestern nach Hause. Um 9:00 wird der Patient aus Zimmer 3 in den OP gebracht. Arzt 1 operiert für 3 Stunden zusammen mit 5 Schwestern, die dafür zur Arbeit kommen, den Patienten. Während dieser Zeit ignoriert er alle Meldungen, d.h. er unterbricht diese Aktion nicht, selbst wenn das System einen Vorfall bei einem anderen Patienten meldet.

Um 10:00 Uhr melden die HMS in R4 und R5, dass der Zustand von \glqq gut\grqq\ auf \glqq lebensgefährlich\grqq\ wechselt. Der freie Arzt unterbricht seine Aktivität und geht in das erste Zimmer. Die Schwester, die am nächsten ist, geht in das zweite Zimmer. Dem operierenden Arzt wird die Situation via Tablett Computer gemeldet. Der freie Arzt erkennt eine Fehlfunktion des Systems und setzt den Zustand wieder auf \glqq gut\grqq. Anschließend geht er zum zweiten kritischen Patienten. 

Um 11:00 Uhr beginnen der Arzt und zwei Schwestern mit der Visite. Währenddessen meldet sein Smartphone eine kritische Situation im OP, so dass er zunächst in den OP geht, um dem operierenden Arzt zu assistieren. Nach einer Stunde sind beide Ärzte mit der Operation fertig und gehen den Aktionen nach, die sie während der Operation ignoriert haben, sofern diese nicht bereits von anderen erledigt wurden.

Jeder Arzt hat eine Schwester, die stündlich zu ihm kommen muss, um Aktuelles mit ihm zu besprechen. Bevor sie dies tun, prüfen sie mit ihrem Tablett, ob der jeweilige Arzt verfügbar ist und wo er sich befindet. Das System liefert hierzu die Raumnummer und den Status des Arztes (\glqq Unterbrechbar\grqq, \glqq Nicht unterbrechbar\grqq\ oder \glqq Unbekannt\grqq).
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\imiscomment{Problemanalyse oder Aufgabenanalyse (Aufgaben, die mit dem System von einem Benutzer gelösten werden können sollen)}

% The following is an example of an IMIS-styled table.
% You are free to use other styles, in fact, encouraged.
% You should look at other options, e.g. using booktable.sty
% Bringhurst says on the issue of rules etc. in tables:
%   There should be a minimum amount of furniture (rules,
%   boxes, dots and other guiderails for traveling through
%   typographic space) and a maximum amount of information.
% You cannot follow Bringhurst and IMIS at the same time,
% your choice.
%\begin{table}[ht]
% \newcolumntype{Y}{>{\columncolor[gray]{.85}}>{\raggedright\arraybackslash}X}
%  \begin{tabularx}{\columnwidth}{!{\vrule width 1pt}Y!{\vrule width 1pt}l|l|l|l|l|l|l!{\vrule width 1pt}}
%    \noalign{\hrule height 1pt}
%    \rowcolor[gray]{.85}
%    \textbf{bis} & \textbf{15.5.} & \textbf{22.5.} & \textbf{5.6.} & \textbf{12.6.} & \textbf{19.6.} & \textbf{26.6.} & \textbf{3.7.} \\\noalign{\hrule height 1pt}
%    \textbf{Content Theory}  & Lübeck & & Kiel     & Lübeck   & Final        &       & \\\hline
%    \textbf{Content Videos}  & Lübeck & & Kiel     & Kiel     & Final        &       & \\\hline
%    \textbf{Cover, Icon}     & Kiel   & & Lübeck   & Kiel     & Kiel         & Final & \\\hline
%    \textbf{Videobearbeitung}& Lübeck & & SLH, LOS & BNR, IGS & CFW,CJB      & Final & \\\hline
%    \textbf{Aufbereitung der Videos}
%                             & Kiel   & & Kiel     & Lübeck   & Lübeck       & Final & \\\hline
%    \textbf{Bilder/Videos der Interviews}
%                             & Lübeck & & Lübeck   & Kiel     & Kiel/Lübeck  & Final & \\\hline
%    \textbf{Audio-Sprechertexte}
%                             & Lübeck & & Kiel     & Kiel     & Lübeck       & Final & \\
%    \noalign{\hrule height 1pt}
%  \end{tabularx}
%  \caption{Beispieltabelle}
%  \label{table:example}
%\end{table}%
%
%\begin{table}[ht]
%  \begin{center}
%    \begin{tabular}{lrr}
%      \textbf{Beruf}  & \textbf{Anzahl} & \textbf{Anteil}\\ \hline
%      Student/in         & 17 & 65.38\% \\
%      Wissenschaftler/in &  3 & 11.54\% \\
%      Professor/in       &  2 &  7.69\% \\
%      Forscher/in        &  1 &  3.85\% \\
%      Informatiker/in    &  1 &  3.85\% \\
%      Führungskraft      &  1 &  3.85\% \\
%      Verkaufskraft      &  1 &  3.85\% \\
%    \end{tabular}
%    \caption{Berufe der Umfrageteilnehmer}
%    \label{table:berufe}
%  \end{center}
%\end{table}%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Benutzeranalyse}\label{sec:user_ana}

Bei der Zielgruppe handelt es sich um erfahrene Entwickler, die mit dem Simulator ihre Anwendungen im Bereich Context Awareness testen möchten und die Anwendung als Werkzeug bei ihrer Arbeit einsetzen. In erster Linie sind das die Mitarbeiter des IMIS, die das MACK-Framework entwickeln und gleichzeitig die Auftraggeber dieses Projektes sind. Sie wollen bestimmte Teile des MACK-Systems wie zum Beispiel seine Reasoner testen und evaluieren.

Da wir die späteren Benutzer als Experten eingestuft haben, standen wir von Anfang an viel mit ihnen in Kontakt, um beispielsweise die spätere Spezifikationssprache der Simulationen festzulegen. Unser Ergebnis war hier, dass mindestens grundlegende Kenntnisse in Java und XML gegeben sind und deshalb die Simulationen mittels dieser Sprachen spezifiziert werden können. Die Erstellung der Simulation nur anhand von Java-Klassen ist zwar umständlich, aber so konnten wir den Fokus auf die Entwicklung des eigentlichen Simulators setzen.

Um eine Simulation zu beschreiben, sollen folgende Teile definiert werden können:
\begin{itemize}
\item Eine Umgebung beispielsweise ein Gebäude mit Räumen und Türen.
\item Personen, die an der Simulation beteiligt sind, diese werden im Weiteren Agents genannt.
\item Verschiedene Sensoren und Aktuatoren, die beteiligt sind und getestet werden sollen.
\item Aktionen, die von Agents oder Sensoren/Aktuatoren angestoßen werden, um reale Abläufe zu simulieren.
\end{itemize}
  

Eine weitere wichtige Frage an die erfahrenen Benutzer war, welche Art von Benutzungsschnittstellen für sie implementiert werden sollten. Wir haben erfahren, dass sowohl besonderer Wert auf detaillierte Logausgaben gelegt wird als auch eine einfache grafische Oberfläche erwünscht ist, da diese für das Erlangen eines ersten Eindrucks von der Arbeit des Systems besonders gut geeignet ist. Die grafische Oberfläche soll hierbei ausschließlich zur Visualisierung und nicht zum Erstellen der Simulation dienen. Ansonsten  wäre der Aufwand der Implementierung zu groß gewesen. Auf den Ablauf der Simulation soll nur sehr begrenzt Einfluss genommen werden können, zum Beispiel durch Verändern der Simulationsgeschwindigkeit oder Pausieren der Simulation.

Im gesamten Entwicklungsprozess haben wir eng mit den späteren Nutzern zusammengearbeitet und uns möglichst früh Rückmeldung zu offenen Fragen und Entwicklungsentscheidungen geholt. So wollten wir sicherstellen, dass die Benutzer direkt an der Entwicklung beteiligt sind und somit mögliche Fehlentwicklungen vermieden werden.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\imiscomment{Zielgruppen}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Kontextanalyse}\label{sec:context_ana}
Der Simulator soll im IMIS auf den Arbeitsplätzen der Entwickler laufen. Die Arbeitsplätze sind mindestens Quad-Core-Computer. Der Simulator soll während der Entwicklung zur Verifikation einzelner Änderungen eingesetzt werden. Außerdem sollen längere Simulationen durchgeführt werden, deren Ergebnisse später mit Hilfe der Logfiles ausgewertet werden können. Das System muss also sowohl im Vorder- als auch im Hintergrund laufen können.

Wegen des hohen Netzwerkaufkommens ist es optimal, Server und Simulator auf einer Maschine laufen lassen zu können und den Netzwerkverkehr über lokale Loopback-Devices abzuwickeln.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%